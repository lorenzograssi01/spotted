   <?php 
      require_once "./php/common.php";
      require_once "./php/database.php";
      if(isset($_POST["username"]))
      {
        $database = connect();
        $res = signmeup($database, $_POST["username"], $_POST["password"], $_POST["passwordrepeat"]);
        if($res == 0)
        {
          header("Location: ./login.php");
          exit();
        }
      }
      else
        $res = 0;
      head();
    ?>
    <script type="module" src="javascript/signup.js?v=0"></script>
    <link href = "./css/loginsignup.css?v=0" rel = "stylesheet">
    <title>Sign up</title>
  </head>
  <body>
    <div id="loginbox">
      <form method="post">
        <a href = "./"><svg id = "spotted_logo" viewBox="100 130 312 252"><defs><linearGradient x1="0%" y1="50%" x2="100%" y2="50%" id="o_f58dbff63_3" gradientUnits="objectBoundingBox"><stop offset="0%" stop-color="rgb(218, 165, 32)" stop-opacity="1.00" data-uid="o_f58dbff63_7"></stop><stop offset="100%" stop-color="rgb(33, 85, 217)" stop-opacity="1"></stop></linearGradient></defs><g transform="matrix(1.0049936771392822, 0, 0, 1.0049936771392822, 1.6679656505584717, -3.9175806045532227)"><path d="M24.777 38.979h-6.758c-1.116 0-2.021 0.905-2.021 2.021v41.355c0 1.116 0.905 2.021 2.021 2.021h40.753   c1.116 0 2.021-0.905 2.021-2.021V41c0-1.116-0.905-2.021-2.021-2.021H43.326V28.354H62.77c4.776 0 8.648 3.872 8.648 8.648v49.351   c0 4.776-3.872 8.648-8.648 8.648H14.021c-4.776 0-8.648-3.872-8.648-8.648V37.002c0-4.776 3.872-8.648 8.648-8.648h10.756V38.979z   " fill="rgba(33,85,217,1)" transform="matrix(1.4074040651321411, 1.359120488166809, -1.359120488166809, 1.4074040651321411, 250.65484619140625, 85.92305755615234)"></path><path d="M75.223 61.021h6.758c1.116 0 2.021-0.905 2.021-2.021V17.646c0-1.116-0.905-2.021-2.021-2.021H41.228   c-1.116 0-2.021 0.905-2.021 2.021V59c0 1.116 0.905 2.021 2.021 2.021h15.446v10.625H37.23c-4.776 0-8.648-3.872-8.648-8.648   V13.648C28.582 8.872 32.454 5 37.23 5h48.749c4.776 0 8.648 3.872 8.648 8.648v49.351c0 4.776-3.872 8.648-8.648 8.648H75.223   V61.021z" fill="rgba(218,165,32,1)" transform="matrix(1.4074040651321411, 1.359120488166809, -1.359120488166809, 1.4074040651321411, 250.6547393798828, 85.92229461669922)"></path></g><path fill="url(#o_f58dbff63_3)" transform="matrix(0.5654085874557495, 0, 0, 0.5654085874557495, 256.5805969238281, 355.93756103515625)" d="M-131.490078125-19.82L-131.490078125-19.82Q-131.490078125 1.07 -154.590078125 1.07L-154.590078125 1.07Q-169.920078125 1.07 -181.300078125-5.52L-181.300078125-5.52L-177.830078125-13.04Q-173.440078125-10.45 -167.16007812499998-8.64Q-160.890078125-6.84 -154.960078125-6.84Q-149.020078125-6.84 -146.00007812500002-8.35L-146.00007812500002-8.35Q-140.580078125-11.08 -140.580078125-19.48L-140.580078125-19.48Q-140.580078125-22.95 -140.920078125-24.12L-140.920078125-24.12Q-142.040078125-28.03 -149.170078125-30.27L-149.170078125-30.27L-166.210078125-35.94Q-174.460078125-38.62 -177.220078125-42.75Q-179.980078125-46.88 -179.980078125-53.32L-179.980078125-53.32Q-179.930078125-62.6 -173.190078125-67.48L-173.190078125-67.48Q-167.380078125-71.63 -156.300078125-71.68L-156.300078125-71.68Q-140.530078125-71.68 -132.620078125-66.75L-132.620078125-66.75L-135.010078125-59.08Q-143.700078125-63.77 -154.590078125-63.77L-154.590078125-63.77Q-162.16007812499998-63.77 -166.110078125-61.82Q-170.070078125-59.86 -170.360078125-55.52L-170.360078125-55.52Q-170.460078125-54.15 -170.460078125-53.08L-170.460078125-53.08Q-170.460078125-49.56 -168.970078125-47.66Q-167.480078125-45.75 -163.180078125-44.29L-163.180078125-44.29L-145.41007812499998-38.28Q-138.090078125-35.79 -134.790078125-31.76Q-131.490078125-27.73 -131.490078125-19.82ZM-106.398203125 19.92L-115.578203125 19.92L-115.578203125-51.76L-108.348203125-51.76L-107.278203125-47.85Q-105.028203125-49.85 -101.11820312500001-51.29Q-97.218203125-52.73 -93.018203125-52.73L-93.018203125-52.73Q-83.39820312500001-52.73 -78.39820312500001-48.05Q-73.38820312499999-43.36 -73.38820312499999-35.6L-73.38820312499999-35.6L-73.38820312499999-16.8Q-73.38820312499999-8.79 -78.858203125-3.86Q-84.328203125 1.07 -94.188203125 1.07L-94.188203125 1.07Q-101.028203125 1.07 -106.398203125-1.66L-106.398203125-1.66L-106.398203125 19.92ZM-106.398203125-40.23L-106.398203125-8.74Q-101.468203125-5.96 -95.358203125-5.96Q-89.258203125-5.96 -85.908203125-8.54Q-82.568203125-11.13 -82.568203125-15.82L-82.568203125-15.82L-82.568203125-36.33Q-82.568203125-40.82 -85.86820312500001-43.26Q-89.158203125-45.7 -93.918203125-45.7Q-98.678203125-45.7 -102.028203125-43.75Q-105.36820312500001-41.8 -106.398203125-40.23L-106.398203125-40.23ZM-49.752109375-14.6Q-49.752109375-5.96 -37.502109375-5.96Q-25.242109375-5.96 -25.242109375-14.6L-25.242109375-14.6L-25.242109375-37.01Q-25.242109375-45.7 -37.502109375-45.7Q-49.752109375-45.7 -49.752109375-37.01L-49.752109375-37.01L-49.752109375-14.6ZM-16.062109375-15.38Q-16.062109375-7.76 -21.262109375-3.34Q-26.462109374999997 1.07 -37.552109375 1.07Q-48.632109375 1.07 -53.782109375-3.32Q-58.932109374999996-7.71 -58.932109374999996-15.38L-58.932109374999996-15.38L-58.932109374999996-36.23Q-58.932109374999996-43.9 -53.782109375-48.32Q-48.632109375-52.73 -37.552109375-52.73Q-26.462109374999997-52.73 -21.262109375-48.29Q-16.062109375-43.85 -16.062109375-36.23L-16.062109375-36.23L-16.062109375-15.38ZM 25.542109375000003 0.39L 24.172109374999998 0.39Q 13.332109375000002 0.39  8.522109375-3.03Q 3.7121093750000007-6.45  3.7121093750000007-14.79L 3.7121093750000007-14.79L 3.7121093750000007-44.82L-4.927890625-44.82L-4.927890625-51.76L 4.052109375000001-51.76L 5.172109375-67.77L 12.892109375-67.77L 12.892109375-51.76L 25.882109375-51.76L 25.882109375-44.82L 12.892109375-44.82L 12.892109375-15.38Q 12.892109375-10.5  15.702109375-8.91Q 18.502109375-7.32  25.492109375-7.32L 25.492109375-7.32L 26.512109375-7.32L 25.542109375000003 0.39ZM 66.557734375 0.39L 65.18773437499999 0.39Q 54.347734375 0.39  49.537734375-3.03Q 44.727734375-6.45  44.727734375-14.79L 44.727734375-14.79L 44.727734375-44.82L 36.087734375-44.82L 36.087734375-51.76L 45.067734375-51.76L 46.187734375-67.77L 53.907734375000004-67.77L 53.907734375000004-51.76L 66.897734375-51.76L 66.897734375-44.82L 53.907734375000004-44.82L 53.907734375000004-15.38Q 53.907734375000004-10.5  56.717734375-8.91Q 59.517734375-7.32  66.507734375-7.32L 66.507734375-7.32L 67.527734375-7.32L 66.557734375 0.39ZM 101.953359375 1.07L 101.953359375 1.07Q 90.573359375 1.07  85.493359375-3.66Q 80.423359375-8.4  80.423359375-18.26L 80.423359375-18.26L 80.423359375-36.28Q 80.423359375-43.95  85.643359375-48.34Q 90.873359375-52.73  101.443359375-52.73Q 112.013359375-52.73  117.163359375-48.66Q 122.313359375-44.58  122.313359375-37.01L 122.313359375-37.01L 122.313359375-24.71L 89.603359375-24.71L 89.603359375-17.43Q 89.603359375-10.99  92.183359375-8.47Q 94.773359375-5.96  101.513359375-5.96Q 108.253359375-5.96  109.133359375-6.25Q 110.013359375-6.54  110.93335937500001-6.93Q 111.863359375-7.32  112.23335937499999-7.86Q 112.593359375-8.4  113.20335937499999-9.5Q 113.823359375-10.6  114.113359375-13.77L 114.113359375-13.77L 122.21335937500001-13.77Q 121.73335937499999-9.13  120.583359375-6.3Q 119.43335937500001-3.47  116.96335937500001-1.78Q 114.503359375-0.1  111.063359375 0.49Q 107.613359375 1.07  101.953359375 1.07ZM 89.603359375-37.11L 89.603359375-30.91L 113.42335937499999-30.91L 113.42335937499999-37.99Q 113.42335937499999-42.38  110.42335937499999-44.04Q 107.42335937499999-45.7  101.613359375-45.7Q 95.803359375-45.7  92.703359375-43.7Q 89.603359375-41.7  89.603359375-37.11L 89.603359375-37.11ZM 158.596328125-52.73L 158.596328125-52.73Q 164.846328125-52.73  170.06632812499998-50.78L 170.06632812499998-50.78L 170.06632812499998-73.54L 179.246328125-73.54L 179.246328125 0L 172.996328125 0L 171.486328125-3.42Q 169.096328125-1.56  165.186328125-0.24Q 161.276328125 1.07  157.466328125 1.07L 157.466328125 1.07Q 146.876328125 1.07  141.916328125-3.64Q 136.966328125-8.35  136.966328125-16.36L 136.966328125-16.36L 136.966328125-35.89Q 136.966328125-43.95  142.286328125-48.34Q 147.606328125-52.73  158.596328125-52.73ZM 146.146328125-15.67Q 146.146328125-11.04  149.436328125-8.59Q 152.736328125-6.15  157.176328125-6.15L 157.176328125-6.15Q 165.086328125-6.15  170.06632812499998-9.23L 170.06632812499998-9.23L 170.06632812499998-43.55Q 165.626328125-45.7  159.276328125-45.7L 159.276328125-45.7Q 146.146328125-45.7  146.146328125-36.91L 146.146328125-36.91L 146.146328125-15.67Z"></path></svg></a>
        <label for = "uname">Username</label>
        <input id = "uname" minlength = "2" maxlength = "20" placeholder="Username" name="username" type="text">
        <label for = "pword">Password</label>
        <input id = "pword" minlength = "8" maxlength = "30" placeholder="Password" name = "password" type="password">
        <label for = "prepeat">Repeat password</label>
        <input id = "prepeat" minlength = "8" maxlength = "30" placeholder="Repeat password" name = "passwordrepeat" type="password">
        <button type="submit">SIGN UP</button>
        <div class="center">
          <?php
              if($res == 0)
                ;
              elseif($res == 2)
                echo "<script type = 'module'>error('The passwords must match')</script>";
              elseif($res == 3)
                echo "<script type = 'module'>error('The username can only contain letters, numbers and these characters: . - _')</script>";
              elseif($res == 4)
                echo "<script type = 'module'>error('The username must be at least 2 characters long')</script>";
              elseif($res == 5)
                echo "<script type = 'module'>error('The password must be at least 8 characters long, and it must contain at least 1 letter and 1 number')</script>";
              elseif($res == 6)
                echo "<script type = 'module'>error('The username or the password is too long')</script>";
              else
                echo "<script type = 'module'>error('The username you typed is already taken')</script>";
          ?>
          <p>
            Already have an account? <a class = "show" href = "./login.php">Log in here</a>
          </p>
      </div>
      </form> 
    </div>
    <div id = 'msg'></div>
  </body>
</html>